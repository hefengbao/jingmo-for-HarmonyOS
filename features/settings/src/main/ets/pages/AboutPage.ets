import { AppConst, Icon, ThemeConst } from 'constants';
import { ContentText } from 'uicomponents';
import { bundleManager } from '@kit.AbilityKit';

@Builder
export function AboutPageBuilder() {
  AboutPage()
}

@ComponentV2
export struct AboutPage {
  @Consumer('NavPathStack') pageStack: NavPathStack = new NavPathStack();
  @Local versionName: string = '';
  @Local desc: string = `
ã€Žäº¬å¢¨æ–‡åº“ã€å¼€æºçš„ä¸­åŽæ–‡åŒ–é˜…è¯» APPã€‚çŒ®ç»™å–œæ¬¢ä¸­åŽæ–‡å­—ã€æ–‡å­¦ã€æ–‡åŒ–çš„äººã€‚

æœ¬åº”ç”¨ä½¿ç”¨çš„æ•°æ®æ¥è‡ªç½‘ç»œï¼ˆä¸»è¦æ˜¯ Github å¼€æºçš„ä»“åº“ï¼‰ï¼Œå¯åœ¨é¡¹ç›®ä»“åº“æŸ¥çœ‹ README.md ä¸­çš„è¯´æ˜Žã€‚

æºç ä»“åº“ï¼š

https://github.com/hefengbao/jingmo-for-HarmonyOS

https://gitee.com/hefengbao/jingmo-for-HarmonyOS

å…³æ³¨å…¬ä¼—å·ã€ŽNowInLifeã€èŽ·å–æ›´æ–°æ¶ˆæ¯ã€‚

å¦‚æžœåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°å†…å®¹é”™è¯¯ï¼Œæ¬¢è¿Žåœ¨å…¬ä¼—å·ç•™è¨€è¯´æ˜Žï¼Œæˆ‘ä»¬å…±åŒæ”¹è¿›ã€‚

å¦‚æžœæœ‰äººæƒ³è¦â™¥èµžåŠ©â™¥æœ¬é¡¹ç›®ï¼Œå¯åœ¨å…¬ä¼—å·æ–‡ç« ä¸­èµžèµðŸ‘ã€‚
  `;

  aboutToAppear(): void {
    bundleManager.getBundleInfoForSelf(bundleManager.BundleFlag.GET_BUNDLE_INFO_WITH_APPLICATION).then((bundleInfo) => {
      this.versionName = bundleInfo.versionName; //åº”ç”¨ç‰ˆæœ¬å
      let versionNo = bundleInfo.versionCode; //åº”ç”¨ç‰ˆæœ¬å·
    }).catch((error: BusinessError) => {
      console.error("get bundleInfo failed,error is " + error)
    })
  }

  build() {
    NavDestination() {
      Scroll() {
        Column() {
          Row() {
            Column() {
              Image(Icon.app_icon)
                .width(80)
                .height(80)
                .background(Color.White)
              Text(this.versionName)
                .margin({ top: 8 })
                .fontSize(14)
            }
          }
          .align(Alignment.Center)
          .margin({ bottom: 16 })

          ContentText({ text: 'â¤è´ºä¸°å®ï¼ˆhefengbaoï¼‰è®¾è®¡å’Œç¼–ç â¤' })
          ContentText({ text: this.desc })
          ContentText({ text: 'å…¬ä¼—å·ï¼šNowInLife' })
          Hyperlink('https://beian.miit.gov.cn', `å¤‡æ¡ˆå·ï¼š${AppConst.ICP}`)
            .width('100%')
            .padding(ThemeConst.P_X16_Y8)
            .color(Color.Gray)
        }
      }
      .width('100%')
      .height('100%')
      .edgeEffect(EdgeEffect.Spring)
      .align(Alignment.TopStart)
    }
    .title($r('app.string.about'))
    .onReady((ctx: NavDestinationContext) => {
      this.pageStack = ctx.pathStack
    })
  }
}